<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/* global _, _mtvnPlayerReady, require, $*/
_mtvnPlayerReady.push(function(player) {
	// when this is true, we&#39;ll abort.
	var isShowingPanel;
<span id='global-property-'>	/**
</span>	 * @ignore
	 * Since this isn&#39;t p-js, we don&#39;t do this from the page.
	 * Instead the api is loaded into the HTML5 player&#39;s iframe.
	 * Once the p-js service is ready, we can avoid these hacks.
	 */
	if (player.config.isSyndicatedLegacyHTML5) {
		player.module(&quot;cc-prefs&quot;, {
			show: function(defaults) {
				if (isShowingPanel) {
					return false;
				}
				isShowingPanel = true;
				require([&quot;mtvn-util&quot;, &quot;mtvn-player/cc-prefs&quot;], function(util, CCPrefs) {
					var prefs = new CCPrefs({
						defaults: defaults,
						css: {
							position: &quot;absolute&quot;,
							top: 0,
							left: 0,
							width: player.$el.width(),
							height: player.$el.height()
						}
					});
					// give the css a second to propagate. 
					_.delay(function() {
						player.$el.append(prefs.$el);
					});
					$(window).resize(function() {
						_.delay(function() {
							prefs.$el.css({
								width: player.$el.width(),
								height: player.$el.height()
							});
						}, 100);
					});
					prefs.on(CCPrefs.Events.REMOVE, function() {
						isShowingPanel = false;
					});
					prefs.on(CCPrefs.Events.CHANGE, function(event) {
						player.message(&quot;updateCCPrefs&quot;, JSON.stringify(event.data));
					});
				});
			}
		});
	}
});
</pre>
</body>
</html>
